\hypertarget{moewsmoews__sieve_8h}{}\doxysubsection{pomyang\+\_\+kparent/inc/moewsmoews\+\_\+sieve.h File Reference}
\label{moewsmoews__sieve_8h}\index{pomyang\_kparent/inc/moewsmoews\_sieve.h@{pomyang\_kparent/inc/moewsmoews\_sieve.h}}


api to the Moews and Moews sieving algorithm  


{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
Include dependency graph for moewsmoews\+\_\+sieve.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{moewsmoews__sieve_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{moewsmoews__sieve_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Configuration and computed values needed to operate sieve, only 1 needed for multiple threads. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Worker which holds state about a single thread running the sieve. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{moewsmoews__sieve_8h_aedfd493a8ff17106362a84f56cc8e24d}{moews\+\_\+sieve\+\_\+odd\+\_\+standard}} (\mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$worker, uint64\+\_\+t seg\+\_\+start)
\begin{DoxyCompactList}\small\item\em runs sieve for odd sigma(m) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{moewsmoews__sieve_8h_a8d6226688d9395c17aab43daddced438}{moews\+\_\+sieve\+\_\+odd\+\_\+squared}} (\mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$worker, uint64\+\_\+t seg\+\_\+start)
\begin{DoxyCompactList}\small\item\em takes odd m in range and runs sieve for sigma(m $\ast$ m) \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{moewsmoews__sieve_8h_ae30ddb5a343bf6b7e376c290989bb4c7}{moews\+\_\+lookup\+\_\+sigma\+\_\+m}} (const \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$worker, uint64\+\_\+t m)
\begin{DoxyCompactList}\small\item\em lookup sigma(m) from m in a sieved block \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{moewsmoews__sieve_8h_a8e5d02e44e8f82167a96e2a774319618}{moews\+\_\+lookup\+\_\+sigma\+\_\+m\+\_\+squared}} (const \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$worker, uint64\+\_\+t m)
\begin{DoxyCompactList}\small\item\em lookup sigma(m $\ast$ m) from m in a sieved block \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} $\ast$ \mbox{\hyperlink{moewsmoews__sieve_8h_ad072e5474e4673d2b63ae77978a6f354}{moews\+\_\+init\+\_\+sieve}} (size\+\_\+t bound, size\+\_\+t seg\+\_\+len)
\begin{DoxyCompactList}\small\item\em creates a \mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} which is shared by a pool of workers \end{DoxyCompactList}\item 
void \mbox{\hyperlink{moewsmoews__sieve_8h_a51febebc5355cfca31c58108a6ec5f2c}{moews\+\_\+destroy\+\_\+sieve}} (\mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} $\ast$cfg)
\begin{DoxyCompactList}\small\item\em free\textquotesingle{}s memory associated with \mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} \end{DoxyCompactList}\item 
\mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$ \mbox{\hyperlink{moewsmoews__sieve_8h_ab33ee37f9625b5e2abe481351eb783b7}{moews\+\_\+init\+\_\+worker}} (const \mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} $\ast$cfg)
\begin{DoxyCompactList}\small\item\em creates a worker object which can be used to run the sieve \end{DoxyCompactList}\item 
void \mbox{\hyperlink{moewsmoews__sieve_8h_a17383cd28d0924852a1a52f99caa91e0}{destroy\+\_\+worker}} (\mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$worker)
\begin{DoxyCompactList}\small\item\em free\textquotesingle{}s memory associated with \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{moewsmoews__sieve_8h_afed04de36ee0b30feb9f07ad8a43681d}{moews\+\_\+check\+\_\+prime}} (const \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$worker, uint64\+\_\+t m)
\begin{DoxyCompactList}\small\item\em checks if odd numbers in range (seg\+\_\+start, seg\+\_\+start + seg\+\_\+len) is prime \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{moewsmoews__sieve_8h_a449d452078f78dc23ab2169df323375e}{moews\+\_\+estimate\+\_\+heap\+\_\+usage}} (size\+\_\+t bound, size\+\_\+t seg\+\_\+len, size\+\_\+t num\+\_\+workers)
\begin{DoxyCompactList}\small\item\em estimates how much heap the sieving buffers will require \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
api to the Moews and Moews sieving algorithm 

\begin{DoxyAuthor}{Author}
Gavin Guinn (\href{mailto:gavinguinn1@gmail.com}{\texttt{ gavinguinn1@gmail.\+com}}) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
Originally Apr 18, 2014, modified 2021-\/12-\/27
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Public Domain (Please credit me; if you find this code useful I would love to hear about your work!) 
\end{DoxyCopyright}


\doxysubsubsection{Function Documentation}
\mbox{\Hypertarget{moewsmoews__sieve_8h_a17383cd28d0924852a1a52f99caa91e0}\label{moewsmoews__sieve_8h_a17383cd28d0924852a1a52f99caa91e0}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!destroy\_worker@{destroy\_worker}}
\index{destroy\_worker@{destroy\_worker}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{destroy\_worker()}{destroy\_worker()}}
{\footnotesize\ttfamily void destroy\+\_\+worker (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$}]{worker }\end{DoxyParamCaption})}



free\textquotesingle{}s memory associated with \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} 


\begin{DoxyParams}{Parameters}
{\em worker} & to be free\textquotesingle{}d \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{moewsmoews__sieve_8h_afed04de36ee0b30feb9f07ad8a43681d}\label{moewsmoews__sieve_8h_afed04de36ee0b30feb9f07ad8a43681d}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_check\_prime@{moews\_check\_prime}}
\index{moews\_check\_prime@{moews\_check\_prime}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_check\_prime()}{moews\_check\_prime()}}
{\footnotesize\ttfamily bool moews\+\_\+check\+\_\+prime (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$}]{worker,  }\item[{uint64\+\_\+t}]{m }\end{DoxyParamCaption})}



checks if odd numbers in range (seg\+\_\+start, seg\+\_\+start + seg\+\_\+len) is prime 


\begin{DoxyParams}{Parameters}
{\em worker} & that has previously run moews\+\_\+sieve\+\_\+odd\+\_\+standard \\
\hline
{\em m} & check if this odd number in range (seg\+\_\+start, seg\+\_\+start + seg\+\_\+len) is prime \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool is prime 
\end{DoxyReturn}
\mbox{\Hypertarget{moewsmoews__sieve_8h_a51febebc5355cfca31c58108a6ec5f2c}\label{moewsmoews__sieve_8h_a51febebc5355cfca31c58108a6ec5f2c}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_destroy\_sieve@{moews\_destroy\_sieve}}
\index{moews\_destroy\_sieve@{moews\_destroy\_sieve}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_destroy\_sieve()}{moews\_destroy\_sieve()}}
{\footnotesize\ttfamily void moews\+\_\+destroy\+\_\+sieve (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} $\ast$}]{cfg }\end{DoxyParamCaption})}



free\textquotesingle{}s memory associated with \mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} 


\begin{DoxyParams}{Parameters}
{\em cfg} & to be free\textquotesingle{}d \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{moewsmoews__sieve_8h_a449d452078f78dc23ab2169df323375e}\label{moewsmoews__sieve_8h_a449d452078f78dc23ab2169df323375e}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_estimate\_heap\_usage@{moews\_estimate\_heap\_usage}}
\index{moews\_estimate\_heap\_usage@{moews\_estimate\_heap\_usage}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_estimate\_heap\_usage()}{moews\_estimate\_heap\_usage()}}
{\footnotesize\ttfamily size\+\_\+t moews\+\_\+estimate\+\_\+heap\+\_\+usage (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{bound,  }\item[{size\+\_\+t}]{seg\+\_\+len,  }\item[{size\+\_\+t}]{num\+\_\+workers }\end{DoxyParamCaption})}



estimates how much heap the sieving buffers will require 


\begin{DoxyParams}{Parameters}
{\em bound} & sieve all odd sigma upto to bound \\
\hline
{\em seg\+\_\+len} & size of range to sieve in a step \\
\hline
{\em num\+\_\+workers} & number of threads working \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t approx bytes to be consumed 
\end{DoxyReturn}
\mbox{\Hypertarget{moewsmoews__sieve_8h_ad072e5474e4673d2b63ae77978a6f354}\label{moewsmoews__sieve_8h_ad072e5474e4673d2b63ae77978a6f354}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_init\_sieve@{moews\_init\_sieve}}
\index{moews\_init\_sieve@{moews\_init\_sieve}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_init\_sieve()}{moews\_init\_sieve()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}}$\ast$ moews\+\_\+init\+\_\+sieve (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{bound,  }\item[{size\+\_\+t}]{seg\+\_\+len }\end{DoxyParamCaption})}



creates a \mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} which is shared by a pool of workers 


\begin{DoxyParams}{Parameters}
{\em bound} & sieving all odd sigma upto to bound \\
\hline
{\em seg\+\_\+len} & size of range to sieve in a step \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
sieve\+\_\+config\+\_\+t$\ast$ config struct which is free\textquotesingle{}d by calling moews\+\_\+destroy\+\_\+sieve 
\end{DoxyReturn}
\mbox{\Hypertarget{moewsmoews__sieve_8h_ab33ee37f9625b5e2abe481351eb783b7}\label{moewsmoews__sieve_8h_ab33ee37f9625b5e2abe481351eb783b7}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_init\_worker@{moews\_init\_worker}}
\index{moews\_init\_worker@{moews\_init\_worker}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_init\_worker()}{moews\_init\_worker()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}}$\ast$ moews\+\_\+init\+\_\+worker (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsieve__config__t}{sieve\+\_\+config\+\_\+t}} $\ast$}]{cfg }\end{DoxyParamCaption})}



creates a worker object which can be used to run the sieve 


\begin{DoxyParams}{Parameters}
{\em cfg} & initalized sieve configuration struct \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
sieve\+\_\+worker\+\_\+t$\ast$ 
\end{DoxyReturn}
\mbox{\Hypertarget{moewsmoews__sieve_8h_ae30ddb5a343bf6b7e376c290989bb4c7}\label{moewsmoews__sieve_8h_ae30ddb5a343bf6b7e376c290989bb4c7}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_lookup\_sigma\_m@{moews\_lookup\_sigma\_m}}
\index{moews\_lookup\_sigma\_m@{moews\_lookup\_sigma\_m}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_lookup\_sigma\_m()}{moews\_lookup\_sigma\_m()}}
{\footnotesize\ttfamily uint64\+\_\+t moews\+\_\+lookup\+\_\+sigma\+\_\+m (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$}]{worker,  }\item[{uint64\+\_\+t}]{m }\end{DoxyParamCaption})}



lookup sigma(m) from m in a sieved block 


\begin{DoxyParams}{Parameters}
{\em worker} & see definition, has run moews\+\_\+sieve\+\_\+odd\+\_\+standard last \\
\hline
{\em m} & number to lookup \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint64\+\_\+t sigma(m) 
\end{DoxyReturn}
\mbox{\Hypertarget{moewsmoews__sieve_8h_a8e5d02e44e8f82167a96e2a774319618}\label{moewsmoews__sieve_8h_a8e5d02e44e8f82167a96e2a774319618}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_lookup\_sigma\_m\_squared@{moews\_lookup\_sigma\_m\_squared}}
\index{moews\_lookup\_sigma\_m\_squared@{moews\_lookup\_sigma\_m\_squared}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_lookup\_sigma\_m\_squared()}{moews\_lookup\_sigma\_m\_squared()}}
{\footnotesize\ttfamily uint64\+\_\+t moews\+\_\+lookup\+\_\+sigma\+\_\+m\+\_\+squared (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$}]{worker,  }\item[{uint64\+\_\+t}]{m }\end{DoxyParamCaption})}



lookup sigma(m $\ast$ m) from m in a sieved block 


\begin{DoxyParams}{Parameters}
{\em worker} & see definition, has run moews\+\_\+sieve\+\_\+odd\+\_\+squared last \\
\hline
{\em m} & number to lookup \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint64\+\_\+t sigma(m $\ast$ m) 
\end{DoxyReturn}
\mbox{\Hypertarget{moewsmoews__sieve_8h_a8d6226688d9395c17aab43daddced438}\label{moewsmoews__sieve_8h_a8d6226688d9395c17aab43daddced438}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_sieve\_odd\_squared@{moews\_sieve\_odd\_squared}}
\index{moews\_sieve\_odd\_squared@{moews\_sieve\_odd\_squared}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_sieve\_odd\_squared()}{moews\_sieve\_odd\_squared()}}
{\footnotesize\ttfamily void moews\+\_\+sieve\+\_\+odd\+\_\+squared (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$}]{worker,  }\item[{uint64\+\_\+t}]{seg\+\_\+start }\end{DoxyParamCaption})}



takes odd m in range and runs sieve for sigma(m $\ast$ m) 


\begin{DoxyParams}{Parameters}
{\em worker} & see struct definiton \\
\hline
{\em seg\+\_\+start} & start of range to sieve \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{moewsmoews__sieve_8h_aedfd493a8ff17106362a84f56cc8e24d}\label{moewsmoews__sieve_8h_aedfd493a8ff17106362a84f56cc8e24d}} 
\index{moewsmoews\_sieve.h@{moewsmoews\_sieve.h}!moews\_sieve\_odd\_standard@{moews\_sieve\_odd\_standard}}
\index{moews\_sieve\_odd\_standard@{moews\_sieve\_odd\_standard}!moewsmoews\_sieve.h@{moewsmoews\_sieve.h}}
\doxyparagraph{\texorpdfstring{moews\_sieve\_odd\_standard()}{moews\_sieve\_odd\_standard()}}
{\footnotesize\ttfamily void moews\+\_\+sieve\+\_\+odd\+\_\+standard (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsieve__worker__t}{sieve\+\_\+worker\+\_\+t}} $\ast$}]{worker,  }\item[{uint64\+\_\+t}]{seg\+\_\+start }\end{DoxyParamCaption})}



runs sieve for odd sigma(m) 


\begin{DoxyParams}{Parameters}
{\em worker} & see struct definiton \\
\hline
{\em seg\+\_\+start} & start of range to sieve \\
\hline
\end{DoxyParams}
